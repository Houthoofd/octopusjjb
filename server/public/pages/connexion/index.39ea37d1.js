var e=globalThis,t={},r={},o=e.parcelRequirec605;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in r){var o=r[e];delete r[e];var l={id:e,exports:{}};return t[e]=l,o.call(l.exports,l,l.exports),l.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){r[e]=t},e.parcelRequirec605=o),o.register;var l=o("1BF7I");o("lTDtW"),o("5OQrz"),o("2LYUy");let n=(0,l.html)`${e=>(0,l.html)`
  <pf-modal>
    <slot>
      <pf-login></pf-login>
    </slot>
  </pf-modal>`}`;document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector("form"),t=document.createElement("div");e?.appendChild(t),e&&e.addEventListener("submit",e=>{e.preventDefault();let r=document.querySelectorAll("input"),o=r[0].value,l=r[1].value;if(!o||!l){t.textContent="Veuillez remplir tous les champs.";return}let n={email:o,password:l};console.log(n),fetch("http://localhost:3000/connexion/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>{if(!e.ok)throw Error("Erreur serveur.");return e.json()}).then(e=>{if(e.length>0){for(let t of e)localStorage.setItem("first_name",t.first_name),localStorage.setItem("email",t.email),localStorage.setItem("role",t.status),localStorage.setItem("isLogged","true"),console.log("mise en mémoire dans le locale storage"+t.first_name+t.email);window.location.href="http://localhost:1234"}else t.textContent="Utilisateur non trouvé ou mot de passe incorrect.";console.log("Réponse du serveur:",e)}).catch(e=>{t.innerHTML="Vous n'êtes pas encore inscris, veuillez vous <a href='inscriptions'><strong>inscrire</string></a>",console.error("Erreur lors de la requête fetch:",e)})})}),(0,l.render)(n);
//# sourceMappingURL=index.39ea37d1.js.map
