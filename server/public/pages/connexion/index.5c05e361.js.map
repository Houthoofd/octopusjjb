{"mappings":"ACAA,SAAS,gBAAgB,CAAC,mBAAoB,KAC1C,IAAM,EAAO,SAAS,aAAa,CAAC,QAC9B,EAAmB,SAAS,aAAa,CAAC,OAChD,GAAM,YAAY,GAEd,GACA,EAAK,gBAAgB,CAAC,SAAU,AAAC,IAC7B,EAAE,cAAc,GAEhB,IAAM,EAAS,SAAS,gBAAgB,CAAC,SACnC,EAAQ,CAAO,CAAC,EAAE,CAAsB,KAAK,CAC7C,EAAW,CAAO,CAAC,EAAE,CAAsB,KAAK,CAEtD,GAAI,CAAC,GAAS,CAAC,EAAU,CACrB,EAAiB,WAAW,CAAG,oCAC/B,MACJ,CAEA,IAAM,EAAO,CAAE,MAAA,EAAO,SAAA,CAAS,EAC/B,QAAQ,GAAG,CAAC,GAEZ,MAAM,mCAAoC,CACtC,OAAQ,OACR,QAAS,CACL,eAAgB,kBACpB,EACA,KAAM,KAAK,SAAS,CAAC,EACzB,GACC,IAAI,CAAC,AAAA,IACF,GAAI,CAAC,EAAS,EAAE,CACZ,MAAM,AAAI,MAAM,mBAEpB,OAAO,EAAS,IAAI,EACxB,GACC,IAAI,CAAC,AAAA,IACF,GAAI,EAAK,MAAM,CAAG,EAAG,CAEjB,IAAI,IAAI,KAAQ,EACZ,aAAa,OAAO,CAAC,aAAc,EAAK,UAAU,EAClD,aAAa,OAAO,CAAC,QAAS,EAAK,KAAK,CAG5C,CAAA,OAAO,QAAQ,CAAC,IAAI,CAAG,uBAC3B,MAEI,EAAiB,SAAS,CAAG,CAAC;;;oBAG9B,CAAC,CAEL,QAAQ,GAAG,CAAC,sBAAuB,EACvC,GACC,KAAK,CAAC,AAAA,IAEH,EAAiB,SAAS,CAAG,CAAC;;;gBAG9B,CAAC,CACD,QAAQ,KAAK,CAAC,mCAAoC,EACtD,EACJ,EAER","sources":["<anon>","ui/src/pages/connexion/index.ts"],"sourcesContent":["var $b1aeced00c83354b$exports = {};\ndocument.addEventListener(\"DOMContentLoaded\", ()=>{\n    const form = document.querySelector(\"form\");\n    const messageContainer = document.createElement(\"div\");\n    form?.appendChild(messageContainer);\n    if (form) form.addEventListener(\"submit\", (e)=>{\n        e.preventDefault();\n        const inputs = document.querySelectorAll(\"input\");\n        const email = inputs[0].value;\n        const password = inputs[1].value;\n        if (!email || !password) {\n            messageContainer.textContent = \"Veuillez remplir tous les champs.\";\n            return;\n        }\n        const data = {\n            email: email,\n            password: password\n        };\n        console.log(data);\n        fetch(\"http://localhost:3000/connexion/\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(data)\n        }).then((response)=>{\n            if (!response.ok) throw new Error(\"Erreur serveur.\");\n            return response.json();\n        }).then((data)=>{\n            if (data.length > 0) {\n                // Stocker les informations utilisateur dans le localStorage\n                for (let item of data){\n                    localStorage.setItem(\"first_name\", item.first_name);\n                    localStorage.setItem(\"email\", item.email);\n                }\n                // Rediriger l'utilisateur après la connexion réussie\n                window.location.href = \"http://localhost:1234\";\n            } else // Si l'utilisateur n'est pas trouvé, afficher un message et un lien d'inscription\n            messageContainer.innerHTML = `\r\n                        Utilisateur non trouv\\xe9 ou mot de passe incorrect.<br>\r\n                        Vous n'\\xeates pas encore inscrit ? <a href=\"/pages/inscription\"><strong>Inscrivez-vous ici</strong></a>.\r\n                    `;\n            console.log(\"R\\xe9ponse du serveur:\", data);\n        }).catch((error)=>{\n            // Gérer les erreurs serveur ou réseau\n            messageContainer.innerHTML = `\r\n                    Une erreur est survenue lors de la connexion.<br>\r\n                    Vous n'\\xeates pas encore inscrit ? <a href=\"/pages/inscription\"><strong>Inscrivez-vous ici</strong></a>.\r\n                `;\n            console.error(\"Erreur lors de la requ\\xeate fetch:\", error);\n        });\n    });\n});\n\n\n//# sourceMappingURL=index.5c05e361.js.map\n","document.addEventListener('DOMContentLoaded', () => {\r\n    const form = document.querySelector('form');\r\n    const messageContainer = document.createElement('div');\r\n    form?.appendChild(messageContainer);\r\n\r\n    if (form) {\r\n        form.addEventListener('submit', (e) => {\r\n            e.preventDefault();\r\n\r\n            const inputs = document.querySelectorAll('input');\r\n            const email = (inputs[0] as HTMLInputElement).value;\r\n            const password = (inputs[1] as HTMLInputElement).value;\r\n\r\n            if (!email || !password) {\r\n                messageContainer.textContent = \"Veuillez remplir tous les champs.\";\r\n                return;\r\n            }\r\n\r\n            const data = { email, password };\r\n            console.log(data);\r\n\r\n            fetch('http://localhost:3000/connexion/', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify(data)\r\n            })\r\n            .then(response => {\r\n                if (!response.ok) {\r\n                    throw new Error('Erreur serveur.');\r\n                }\r\n                return response.json();\r\n            })\r\n            .then(data => {\r\n                if (data.length > 0) {\r\n                    // Stocker les informations utilisateur dans le localStorage\r\n                    for(let item of data){\r\n                        localStorage.setItem('first_name', item.first_name);\r\n                        localStorage.setItem('email', item.email);\r\n                    }\r\n                    // Rediriger l'utilisateur après la connexion réussie\r\n                    window.location.href = 'http://localhost:1234';\r\n                } else {\r\n                    // Si l'utilisateur n'est pas trouvé, afficher un message et un lien d'inscription\r\n                    messageContainer.innerHTML = `\r\n                        Utilisateur non trouvé ou mot de passe incorrect.<br>\r\n                        Vous n'êtes pas encore inscrit ? <a href=\"/pages/inscription\"><strong>Inscrivez-vous ici</strong></a>.\r\n                    `;\r\n                }\r\n                console.log('Réponse du serveur:', data);\r\n            })\r\n            .catch(error => {\r\n                // Gérer les erreurs serveur ou réseau\r\n                messageContainer.innerHTML = `\r\n                    Une erreur est survenue lors de la connexion.<br>\r\n                    Vous n'êtes pas encore inscrit ? <a href=\"/pages/inscription\"><strong>Inscrivez-vous ici</strong></a>.\r\n                `;\r\n                console.error('Erreur lors de la requête fetch:', error);\r\n            });\r\n        });\r\n    }\r\n});\r\n"],"names":["document","addEventListener","form","querySelector","messageContainer","createElement","appendChild","e","preventDefault","inputs","querySelectorAll","email","value","password","textContent","data","console","log","fetch","method","headers","body","JSON","stringify","then","response","ok","Error","json","length","item","localStorage","setItem","first_name","window","location","href","innerHTML","catch","error"],"version":3,"file":"index.5c05e361.js.map"}